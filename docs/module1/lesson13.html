<!DOCTYPE html>
<html lang="en">
<head>
	<title>Lesson 1.3: The Core Game</title>
	<link rel="stylesheet" media="screen" href="../css/style.css">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="author" content="Thomas S. Phillips">
	<meta name="robots" content="noindex, nofollow">
	<script src="../scripts/google-code-prettify/run_prettify.js"></script>
</head>
<body><div id="container">

    <header>Learning objective 1.3: Write the initial code for a match-3 game.</header>
    
    <div id="banner">
        <div id="support">
            <b>CONTACT</b><br>The original author can be reached at &#116;&#111;&#109;&#064;&#116;&#115;&#112;&#104;&#105;&#108;&#108;&#105;&#112;&#115;&#046;&#110;&#101;&#116;.<br>
            <br>
            <br>
            <br>
        </div>
    </div>
    
    <div id="content-container">

    <nav class="ac-container">
        <div>
            <input id="ac-0" name="accordion-1" type="radio" />
            <label for="ac-0" class="examplelabel">Final Game</label>
            <article class="ac-small">
                <ul>
                    <li><a href="../game/game.html" target="_blank">The Final Game</a></li>
                    <li><a href="../game/game.js" target="_blank">Game Source Code</a></li>
                </ul>
            </article>
        </div>

        <div>
            <input id="ac-1" name="accordion-1" type="radio" checked />
            <label for="ac-1">1: Getting Started</label>
            <article class="ac-small">
                <ul>
                    <li><a href="../module1/index.html">Module 1 Overview</a></li>
                    <li>1.1 <a href="../module1/lesson11.html">Introduction</a></li>
                    <li>1.2 <a href="../module1/lesson12.html">Basic Tools</a></li>
                    <li><b>1.3 <a href="../module1/lesson13.html">The Core Game</a></b></li>
                </ul>
            </article>
        </div>
        <div>
            <input id="ac-2" name="accordion-1" type="radio" />
            <label for="ac-2">2: Game Design</label>
            <article class="ac-small">
                <ul>
                    <li><a href="../module2/index.html">Module 2 Overview</a></li>
                    <li>2.1 <a href="../module2/lesson21.html">Match-3 Games</a></li>
                    <li>2.2 <a href="../module2/lesson22.html">Adapting the Game</a></li>
                    <li>2.3 <a href="../module2/lesson23.html">Game Design</a></li>
                </ul>
            </article>
        </div>
        <div>
            <input id="ac-3" name="accordion-1" type="radio" />
            <label for="ac-3">3: Data</label>
            <article class="ac-small">
                <ul>
                    <li><a href="../module3/index.html">Module 3 Overview</a></li>
                    <li>3.1 <a href="../module3/lesson31.html">Game Variables</a></li>
                    <li>3.2 <a href="../module3/lesson32.html">Input and Output</a></li>
                    <li>3.3 <a href="../module3/lesson33.html">Game State</a></li>
                    <li>3.4 <a href="../module3/lesson34.html">Game Board</a></li>
                </ul>
            </article>
        </div>
        <div>
            <input id="ac-4" name="accordion-1" type="radio" />
            <label for="ac-4">4: Display</label>
            <article class="ac-small">
                <ul>
                    <li><a href="../module4/index.html">Module 4 Overview</a></li>
                    <li>4.1 <a href="../module4/lesson41.html">Loading Images</a></li>
                    <li>4.2 <a href="../module4/lesson42.html">Drawing in Layers</a></li>
                    <li>4.3 <a href="../module4/lesson43.html">Background and Framing</a></li>
                    <li>4.4 <a href="../module4/lesson44.html">Draw a Grid of Tiles</a></li>
                </ul>
            </article>
        </div>
        <div>
            <input id="ac-5" name="accordion-1" type="radio" />
            <label for="ac-5">5: Input</label>
            <article class="ac-small">
                <ul>
                    <li><a href="../module5/index.html">Module 5 Overview</a></li>
                    <li>5.1 <a href="../module5/lesson51.html">Tracking Mouse Movement</a></li>
                    <li>5.2 <a href="../module5/lesson52.html">Clicking Tiles</a></li>
                </ul>
            </article>
        </div>
        <div>
            <input id="ac-6" name="accordion-1" type="radio" />
            <label for="ac-6">6: Rules of the Game</label>
            <article class="ac-medium">
                <ul>
                    <li><a href="../module6/index.html">Module 6 Overview</a></li>
                    <li>6.1 <a href="../module6/lesson61.html">Main Rules</a></li>
                    <li>6.2 <a href="../module6/lesson62.html">Replacing Tiles</a></li>
                    <li>6.3 <a href="../module6/lesson63.html">Falling Tiles</a></li>
                    <li>6.4 <a href="../module6/lesson64.html">Clear 3-in-a-Row</a></li>
                    <li>6.5 <a href="../module6/lesson65.html">Swapping Tiles</a></li>
                    <li>6.6 <a href="../module6/lesson66.html">Game Over?</a></li>
                </ul>
            </article>
        </div>
        <div>
            <input id="ac-7" name="accordion-1" type="radio" />
            <label for="ac-7">7: Visual Effects</label>
            <article class="ac-medium">
                <ul>
                    <li><a href="../module7/index.html">Module 7 Overview</a></li>
                    <li>7.1 <a href="../module7/lesson71.html">Loading Visual Effects</a></li>
                    <li>7.2 <a href="../module7/lesson72.html">Selection Effect</a></li>
                    <li>7.3 <a href="../module7/lesson73.html">Smooth Dropping Tiles</a></li>
                    <li>7.4 <a href="../module7/lesson74.html">What's the score?</a></li>
                    <li>7.5 <a href="../module7/lesson75.html">Just the Facts</a></li>
                </ul>
            </article>
        </div>
        <div>
            <input id="ac-8" name="accordion-1" type="radio" />
            <label for="ac-8">8: Sound Effects</label>
            <article class="ac-small">
                <ul>
                    <li><a href="../module8/index.html">Module 8 Overview</a></li>
                    <li>8.1 <a href="../module8/lesson81.html">Detect Supported Audio</a></li>
                    <li>8.2 <a href="../module8/lesson82.html">Load Audio</a></li>
                    <li>8.3 <a href="../module8/lesson83.html">Play Triggered Audio</a></li>
                </ul>
            </article>
        </div>
        <div>
            <input id="ac-9" name="accordion-1" type="radio" />
            <label for="ac-9">9: Going Forward</label>
            <article class="ac-small">
                <ul>
                    <li><a href="../module9/index.html">Module 9 Overview</a></li>
                    <li>9.1 <a href="../module9/lesson91.html">Customization</a></li>
                    <li>9.2 <a href="../module9/lesson92.html">Extending the Game</a></li>
                    <li>9.3 <a href="../module9/lesson93.html">Conclusion</a></li>
                </ul>
            </article>
        </div>
        <div>
            <input id="ac-10" name="accordion-1" type="radio" />
            <label for="ac-10" class="examplelabel">Examples</label>
            <article class="ac-large">
                <ul>
                    <li>(all open in new window)</li>
                    <li><a href="../examples/example13.html" target="_blank">1.3 Blink</a></li>
                                
                    <li><a href="../examples/example31.html" target="_blank">3.1 Drawing Offsets</a></li>
                    <li><a href="../examples/example32.html" target="_blank">3.2 Canvas and Context</a></li>
                    <li><a href="../examples/example33.html" target="_blank">3.3 Game States</a></li>
                    <li><a href="../examples/example34.html" target="_blank">3.4 Arrays</a></li>
            
                    <li><a href="../examples/example41.html" target="_blank">4.1 Loading Images</a></li>
                    <li><a href="../examples/example42.html" target="_blank">4.2 Drawing Layers</a></li>
                    <li><a href="../examples/example43.html" target="_blank">4.3 Image Position</a></li>
                    <li><a href="../examples/example44.html" target="_blank">4.4 Drawing Grids</a></li>
            
                    <li><a href="../examples/example51.html" target="_blank">5.1 The Mouse</a></li>
                    <li><a href="../examples/example52.html" target="_blank">5.2 Mouse Click</a></li>
            
                    <li><a href="../examples/example61.html" target="_blank">6.1 Toggle Tiles</a></li>
                    <li><a href="../examples/example62.html" target="_blank">6.2 Simple Game</a></li>
                    <li><a href="../examples/example63.html" target="_blank">6.3 Falling Tiles</a></li>
                    <li><a href="../examples/example64.html" target="_blank">6.4 Bonus Match</a></li>
                    <li><a href="../examples/example65.html" target="_blank">6.5 Moving Earth</a></li>
                    <li><a href="../examples/example66.html" target="_blank">6.6 Martian Orbit</a></li>
                    
                    <li><a href="../examples/example71.html" target="_blank">7.1 Flashy</a></li>
                    <li><a href="../examples/example72.html" target="_blank">7.2 Pulse</a></li>
                    <li><a href="../examples/example73.html" target="_blank">7.3 Pulsing Earth</a></li>
                    <li><a href="../examples/example74.html" target="_blank">7.4 Clickity-Clack</a></li>
                    <li><a href="../examples/example75.html" target="_blank">7.5 Rainbow Text</a></li>
                    
                    <li><a href="../examples/example81.html" target="_blank">8.1 Environment</a></li>
                    <li><a href="../examples/example82.html" target="_blank">8.2 Sounds</a></li>
                    <li><a href="../examples/example83.html" target="_blank">8.3 Volume</a></li>
                </ul>
            </article>
        </div>

    </nav>
    
    <section id="content">
        &nbsp;
        <h2>Lesson 1.3: The Core Game</h2>
        
        <div class="video">
            <video controls>
                <source src="video13.mp4" type="video/mp4">
                <source src="video13.ogg" type="video/ogg">
                Your browser does not support the video tag.
            </video>
        </div>

<aside><b>Know your browser!</b><br>If you don't know how yet, you need to learn how to "view source" and how to open the console in your browser. Usually, you can right click on a web page and view source. To open the console you need to use a menu or press a special key. Read up on how to use your browser!</aside>
<h3>game.html</h3>

<p>Below is the game.html file we will start with. The file is basically an HTML5 container that holds your game - think of it like a box for the game. You will view the game.html file with a web browser to play your game.</p>

<p>In your text editor, create a new file named game.html (make sure there is nothing after the .html in the file name) and type in the following lines:</p>

<pre class="prettyprint lang-html" style="font-size:10pt;">
&lt;!DOCTYPE html>
&lt;html>
&lt;head>
	&lt;title>Game Blueprint: Match 3 Basic&lt;/title>
	&lt;style type="text/css">
		html,body {
			background-color: #000;
			color: #fff;
			margin: 0;
			padding: 0;
		}
		#canvas {
			position: absolute;
			left: 0;
			right: 0;
			top: 0;
			bottom: 0;
			margin: auto;
		}
	&lt;/style>

&lt;/head>
&lt;body>
    &lt;div id="game">&lt;canvas id="canvas" width="800" height="600">&lt;/canvas>&lt;/div>
    &lt;script type="text/javascript" src="game.js">&lt;/script>
&lt;/body>
&lt;/html>
</pre>

<p>This is not a course on HTML5, so we won't go over all the details of the HTML file. What is important to know is the canvas tag. The canvas element is like a screen inside your web browser, and the game will be drawing on that screen.</p>

<p>Be sure to save your file.  This is the entire game.html file.  All the rest of our work will be in the game.js file.</p>

<aside><b>Single or Separate</b><br>The games you make will be written in Javascript. The Javascript code can be inside the main web page or the code can be in a separate file. The final game shows the HTML and Javascript in separate files. The running examples all have the HTML and code in the same file.</aside>
<h3>game.js</h3>

<p>Below is the game.js file we will start with. The file is the actual game program, or code. For this course we will put all of the game code into this one file.</p>

<p>In your text editor, open a new file and name it game.js (Again, make sure the file name ends  with .js)  Enter the following lines in your file:</p>

<pre class="prettyprint lang-javascript" style="font-size:10pt;">
///////////////////////////
// Lesson 1.3 The Core Game

function game_core() {
   update();  // check the rules
   draw();    // draw the game on the screen
   vfx();     // display visual effects
   sfx();     // play sound effects
} // game_core()

// Call the game core every 80ms (i.e., every 0.08 seconds)
setInterval(game_core, 80);
</pre>

<p>Don’t forget to save your file after entering the lines.</p>

<p>You need to know there are two types of code in the file: functions and immediate code. Functions are like helpers. Any code can "call" a function, and the function will perform some kind of service. A function will look something like this:</p>

<pre class="prettyprint lang-javascript" style="font-size:10pt;">
function my_function() {
   // do something useful
} // my_function() &lt;- this comment makes the code more readable for humans
</pre>

<p>The word function is followed by the name of the function, and the function itself is between two braces.</p>

<p>Example:   Buying groceries can involve many steps.  We’ll put all the steps into a function:</p>

<pre class="prettyprint lang-javascript" style="font-size:10pt;">
function grocery_shopping() {
    make shopping list();
    go to store();
    find items on list();
    pay for purchases();
    take groceries home();
    put away groceries();
}  // grocery_shopping()
</pre>

<img class="sidebar" src="definitions1_3.png">

<p>On a daily to-do list, instead of listing out all the steps, we can just have our list “call” the function of grocery_shopping instead of writing out every step of the process each time we want to go grocery shopping.</p>

<p>Functions are only run when another piece of code runs them. In contract, immediate code is run when the code is loaded in the browser. Immediate code is the code not inside functions.</p>

<h3>game_core()</h3>

<p>Our main function is called "game_core()." The function will be called on a regular basis. (Every 0.08 seconds, in fact.) The game_core() function will call other functions. It will check the game rules, draw the game on the screen, display visual effects, and play sound effects.</p>

<aside><b>How fast?</b><br>For the final game we call setInterval() with 80ms. If you increase that number the game will run slower; lower the number for a faster, action-oriented game.</aside>
<h3>setInterval(game_core, 80)</h3>

We will be using arguments (or function parameters) with some functions. The call to setInterval is our first piece of immediate code. It calls a special function that lets the browser know we want the game_core() function to run every 80 milliseconds. (80 milliseconds is also 80ms or 0.08 seconds.)

<h3>Conclusion</h3>

<p>Our basic game is made of the game.html and game.js files. What we have so far will do absolutely nothing and will also produce some errors in the browser. That's okay for now. Before we start filling in the missing pieces we need to figure out what kind of game we are making. The next lesson covers exactly that.</p>

        <a href="lesson12.html"><img src="../media/previous_button.png" width="210" height="62" alt="Previous Lesson" style="float:left;margin:5px;" /></a>
        <a href="../module2/index.html"><img src="../media/next_button.png" width="210" height="62" alt="Next Lesson" style="float:right;margin:5px;" /></a>
        
        <div style="height:62px;"></div>
        <p />
        
        <hr width="80%">
        <a href="../examples/example13.html" target="_blank"><img class="center" src="example1_3.png" /></a>

    </section>

    &nbsp;

    </div>

    <footer>
        <div class="trademark">Game Blueprint is a trademark of Thomas S. Phillips.</div>
        <div class="copyright">Copyright &copy; 2014 Thomas S. Phillips.</div>
    </footer>
</div></body>
</html>
